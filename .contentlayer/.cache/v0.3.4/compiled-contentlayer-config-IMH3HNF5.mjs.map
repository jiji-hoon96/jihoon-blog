{
  "version": 3,
  "sources": ["../../../contentlayer.config.ts", "../../../src/lib/rehype-image-path.ts"],
  "sourcesContent": ["import { defineDocumentType, makeSource } from 'contentlayer/source-files'\nimport rehypeAutolinkHeadings from 'rehype-autolink-headings'\nimport rehypePrettyCode from 'rehype-pretty-code'\nimport rehypeSlug from 'rehype-slug'\nimport remarkGfm from 'remark-gfm'\nimport readingTime from 'reading-time'\nimport { rehypeImagePath } from './src/lib/rehype-image-path'\n\nexport const Post = defineDocumentType(() => ({\n  name: 'Post',\n  filePathPattern: `**/*.md`,\n  contentType: 'markdown',\n  fields: {\n    title: { type: 'string', required: true },\n    date: { type: 'date', required: true },\n    emoji: { type: 'string', required: true },\n    categories: { type: 'string', required: true },\n  },\n  computedFields: {\n    slug: {\n      type: 'string',\n      resolve: (doc) => {\n        // Extract YYMMDD from path: content/240101/index.md -> /240101\n        const pathParts = doc._raw.flattenedPath.split('/')\n        return `/${pathParts[pathParts.length - 1]}`\n      },\n    },\n    categoryArray: {\n      type: 'list',\n      resolve: (doc) => doc.categories.split(' ').filter(c => !c.includes('ignore')),\n    },\n    readingTime: {\n      type: 'string',\n      resolve: (doc) => readingTime(doc.body.raw).text,\n    },\n    excerpt: {\n      type: 'string',\n      resolve: (doc) => {\n        // Generate excerpt from body (first 200 chars)\n        const text = doc.body.raw.replace(/```[\\s\\S]*?```/g, '').replace(/#/g, '').trim()\n        return text.slice(0, 200) + (text.length > 200 ? '...' : '')\n      },\n    },\n  },\n}))\n\nexport default makeSource({\n  contentDirPath: './content',\n  documentTypes: [Post],\n  disableImportAliasWarning: true,\n  markdown: {\n    remarkPlugins: [],\n    rehypePlugins: [\n      rehypeSlug,\n      [\n        rehypeAutolinkHeadings,\n        {\n          behavior: 'wrap',\n          properties: {\n            className: ['anchor'],\n          },\n        },\n      ],\n      [\n        rehypePrettyCode as any,\n        {\n          theme: {\n            dark: 'github-dark',\n            light: 'github-light',\n          },\n          keepBackground: false,\n        },\n      ],\n      rehypeImagePath as any,\n    ],\n  },\n})\n", "import { visit } from 'unist-util-visit'\nimport { Root } from 'hast'\n\n/**\n * Rehype plugin to convert relative image paths to absolute paths\n * Converts: ![alt](image.jpg) -> ![alt](/content/240909/image.jpg)\n */\nexport function rehypeImagePath() {\n  return (tree: Root, file: any) => {\n    // Extract folder name from file path (e.g., content/240909/index.md -> 240909)\n    const filePath = file.history[0] || ''\n    const match = filePath.match(/content\\/([^\\/]+)\\//)\n    const folderName = match ? match[1] : ''\n\n    if (!folderName) return\n\n    visit(tree, 'element', (node: any) => {\n      // Process img tags\n      if (node.tagName === 'img' && node.properties?.src) {\n        const src = node.properties.src as string\n\n        // Only process relative paths (not starting with http, https, or /)\n        if (!src.startsWith('http') && !src.startsWith('/')) {\n          node.properties.src = `/content/${folderName}/${src}`\n        }\n      }\n    })\n  }\n}\n"],
  "mappings": ";AAAA,SAAS,oBAAoB,kBAAkB;AAC/C,OAAO,4BAA4B;AACnC,OAAO,sBAAsB;AAC7B,OAAO,gBAAgB;AAEvB,OAAO,iBAAiB;;;ACLxB,SAAS,aAAa;AAOf,SAAS,kBAAkB;AAChC,SAAO,CAAC,MAAY,SAAc;AAEhC,UAAM,WAAW,KAAK,QAAQ,CAAC,KAAK;AACpC,UAAM,QAAQ,SAAS,MAAM,qBAAqB;AAClD,UAAM,aAAa,QAAQ,MAAM,CAAC,IAAI;AAEtC,QAAI,CAAC;AAAY;AAEjB,UAAM,MAAM,WAAW,CAAC,SAAc;AAEpC,UAAI,KAAK,YAAY,SAAS,KAAK,YAAY,KAAK;AAClD,cAAM,MAAM,KAAK,WAAW;AAG5B,YAAI,CAAC,IAAI,WAAW,MAAM,KAAK,CAAC,IAAI,WAAW,GAAG,GAAG;AACnD,eAAK,WAAW,MAAM,YAAY,UAAU,IAAI,GAAG;AAAA,QACrD;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;ADpBO,IAAM,OAAO,mBAAmB,OAAO;AAAA,EAC5C,MAAM;AAAA,EACN,iBAAiB;AAAA,EACjB,aAAa;AAAA,EACb,QAAQ;AAAA,IACN,OAAO,EAAE,MAAM,UAAU,UAAU,KAAK;AAAA,IACxC,MAAM,EAAE,MAAM,QAAQ,UAAU,KAAK;AAAA,IACrC,OAAO,EAAE,MAAM,UAAU,UAAU,KAAK;AAAA,IACxC,YAAY,EAAE,MAAM,UAAU,UAAU,KAAK;AAAA,EAC/C;AAAA,EACA,gBAAgB;AAAA,IACd,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ;AAEhB,cAAM,YAAY,IAAI,KAAK,cAAc,MAAM,GAAG;AAClD,eAAO,IAAI,UAAU,UAAU,SAAS,CAAC,CAAC;AAAA,MAC5C;AAAA,IACF;AAAA,IACA,eAAe;AAAA,MACb,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ,IAAI,WAAW,MAAM,GAAG,EAAE,OAAO,OAAK,CAAC,EAAE,SAAS,QAAQ,CAAC;AAAA,IAC/E;AAAA,IACA,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ,YAAY,IAAI,KAAK,GAAG,EAAE;AAAA,IAC9C;AAAA,IACA,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ;AAEhB,cAAM,OAAO,IAAI,KAAK,IAAI,QAAQ,mBAAmB,EAAE,EAAE,QAAQ,MAAM,EAAE,EAAE,KAAK;AAChF,eAAO,KAAK,MAAM,GAAG,GAAG,KAAK,KAAK,SAAS,MAAM,QAAQ;AAAA,MAC3D;AAAA,IACF;AAAA,EACF;AACF,EAAE;AAEF,IAAO,8BAAQ,WAAW;AAAA,EACxB,gBAAgB;AAAA,EAChB,eAAe,CAAC,IAAI;AAAA,EACpB,2BAA2B;AAAA,EAC3B,UAAU;AAAA,IACR,eAAe,CAAC;AAAA,IAChB,eAAe;AAAA,MACb;AAAA,MACA;AAAA,QACE;AAAA,QACA;AAAA,UACE,UAAU;AAAA,UACV,YAAY;AAAA,YACV,WAAW,CAAC,QAAQ;AAAA,UACtB;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE;AAAA,QACA;AAAA,UACE,OAAO;AAAA,YACL,MAAM;AAAA,YACN,OAAO;AAAA,UACT;AAAA,UACA,gBAAgB;AAAA,QAClB;AAAA,MACF;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACF,CAAC;",
  "names": []
}
