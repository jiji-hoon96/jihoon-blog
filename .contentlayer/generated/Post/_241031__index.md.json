{
  "title": "useSyncExternalStore Deep Dive",
  "date": "2024-10-31T00:00:00.000Z",
  "emoji": "ğŸ¤¿",
  "categories": "í”„ë¡ íŠ¸ì—”ë“œ ìë°”ìŠ¤í¬ë¦½íŠ¸",
  "body": {
    "raw": "\n\nuseSyncExternalStoreëŠ” React 18ì—ì„œ ë„ì…ëœ Hookìœ¼ë¡œ, ì™¸ë¶€ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì™€ Reactì˜ ë™ì‹œì„± ë Œë”ë§(Concurrent Rendering)ì„ ì•ˆì „í•˜ê²Œ ì—°ë™í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤.\n\nReact 18ì˜ ë™ì‹œì„± ë Œë”ë§ ëª¨ë“œì—ì„œ ì™¸ë¶€ ìŠ¤í† ì–´ì˜ ìƒíƒœ ë³€ê²½ì´ ì¼ê´€ì„±ì„ í•´ì¹˜ëŠ” ë¬¸ì œ ë°œìƒí–ˆëŠ”ë°, ì´ê²ƒì„ Tearing í˜„ìƒì´ë¼í•œë‹¤. (ê°„í˜¹ ë™ì¼í•œ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” UI ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì„œë¡œ ë‹¤ë¥¸ ê°’ì„ í‘œê¸°í•˜ëŠ” ë²„ê·¸)\n\n<br/>\n\n## Tearing í˜„ìƒ\n\n\n```typescript\nconst store = {\n  count: 0,\n  listeners: new Set(),\n  subscribe(listener) {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  },\n  getValue() {\n    return this.count;\n  },\n  setValue(newValue) {\n    this.count = newValue;\n    this.listeners.forEach((listener) => listener());\n  },\n};\n\nfunction Counter1() {\n  const [count, setCount] = useState(store.getValue());\n\n  useEffect(() => {\n    return store.subscribe(() => {\n      setCount(store.getValue());\n    });\n  }, []);\n\n  return <div>Count: {count}</div>;\n}\n\nfunction Counter2() {\n  const [count, setCount] = useState(store.getValue());\n\n  useEffect(() => {\n    return store.subscribe(() => {\n      setCount(store.getValue());\n    });\n  }, []);\n\n  return <div>Count: {count}</div>;\n}\n```\n\nConcurrent ëª¨ë“œì—ì„œ ReactëŠ” ë Œë”ë§ì„ ì—¬ëŸ¬ ì²­í¬ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•œë‹¤.\n\nê·¸ë¦¬ê³  useEffectë¥¼ ì‚¬ìš©í•œ êµ¬ë…ì€ ë¹„ë™ê¸°ì ì´ë©°, Concurrent ëª¨ë“œì—ì„œ ë Œë”ë§ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆë‹¤.\n\nì´ë ‡ê²Œë˜ë©´ ì„œë¡œë‹¤ë¥¸ ì‚¬ìš©ìë§ˆë‹¤ ì„œë¡œë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë³´ê²Œë˜ëŠ”ë°, ë°ì´í„° ì¼ê´€ì„±ì´ ì¤‘ìš”í•œ ë„ë©”ì¸ì—ì„œëŠ” ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ë¥¼ ì•¼ê¸°í•œë‹¤.\n\nì´ëŸ° ë¬¸ì œë¥¼ useSyncExternalStoreë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\n```typescript\nfunction Counter1() {\n  const count = useSyncExternalStore(\n    store.subscribe, // êµ¬ë… í•¨ìˆ˜\n    store.getValue, // ê°’ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜\n  );\n\n  return <div>Count: {count}</div>;\n}\n\nfunction Counter2() {\n  const count = useSyncExternalStore(store.subscribe, store.getValue);\n\n  return <div>Count: {count}</div>;\n}\n```\n\nuseSyncExternalStoreì„ ì‚¬ìš©í•˜ë©´ ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.\n\nReactê°€ ë Œë”ë§ ë„ì¤‘ ìŠ¤í† ì–´ ê°’ì´ ë³€ê²½ë˜ë©´ ì¦‰ì‹œ ê°ì§€í•˜ê³  ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ì‹œì ì˜ ë°ì´í„°ë¥¼ ë³´ì—¬ì¤€ë‹¤.\n\nì´ë ‡ê²Œ useSyncExternalStoreì„ ì´ìš©í•´ ì™¸ë¶€ ìƒíƒœë¥¼ êµ¬ë…í•  ë•Œ useEffectë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì˜ í•œê³„ì™€ ìƒíƒœ ì—…ë°ì´íŠ¸ ë™ê¸°í™” ë¬¸ì œë¥¼ í•´ê²°í•¨.\n\n<br/>\n\n> ğŸ‘‹ ì ê¹! Redux íŒ€ì—ì„œ Tearing ë¬¸ì œë¥¼ ë‹¤ë£¨ì—ˆë‹¤.\n>\n> [React-Redux v8ì—ì„œ useSelector ë‚´ë¶€ì½”ë“œë¥¼ useSyncExternalStoreë¡œ ì—…ë°ì´íŠ¸ ì§„í–‰](https://github.com/reduxjs/react-redux/releases/tag/v8.0.0)\n>\n> ë” ìµœì í™”ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ useSyncExternalStoreWithSelectorì„ ì‚¬ìš©\n \n <br/>\n\n<br/>\n\n## ë™ì‘ì½”ë“œ ì‚´í´ë³´ê¸°\n\n```typescript\nconst snapshot = useSyncExternalStore(\n  subscribe: (onStoreChange: () => void) => () => void,\n  getSnapshot: () => T,\n  getServerSnapshot?: () => T\n);\n```\n\nì¶œì²˜) [React-useSyncExternalStore Github](https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShim.js#L17)\n\n<br/>\n\n### subscribe\n\n- ìŠ¤í† ì–´ êµ¬ë…ì„ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ë¡œ ìŠ¤í† ì–´ ë³€ê²½ ì‹œ í˜¸ì¶œë  ì½œë°±ì„ ë°›ëŠ”ë‹¤.\n\n- êµ¬ë… í•´ì œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤.\n\n- ë Œë”ë§ ê°„ì— ì•ˆì •ì ì¸ ì°¸ì¡°ë¥¼ ìœ ì§€í•´ì•¼ í•œë‹¤.\n\n<br/>\n\n### getSnapshot\n\n- ìŠ¤í† ì–´ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë‹¤. ìŠ¤í† ì–´ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë™ì¼í•œ ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.\n\n- ë°˜í™˜ê°’ì€ ë¶ˆë³€(immutable)ì´ì–´ì•¼ í•œë‹¤.\n\n- getSnapShot í•¨ìˆ˜ì—ì„œ ë§¤ë²ˆ ë˜‘ê°™ì€ ì°¸ì¡°ë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ë©´ ReactëŠ” ë³€ê²½ì„ ê°ì§€í•  ìˆ˜ ì—†ê¸°ì— ì‹¤ì œ ê°ì²´ ë³€í™”ì—ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë ‡ê¸°ì— Immer ë¼ì´ë¸ŒëŸ¬ë¦¬, ê¹Šì€ ë³µì‚¬ ë“±ìœ¼ë¡œ ë¶ˆë³€ì„±ì„ ë³´ì¥í•˜ë©° ë‹¤ë¥¸ ì°¸ì¡°ë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤. (Redux, Mobx ì—ì„œ ì¤‘ì ìœ¼ë¡œ ë‹¤ë£¸)\n\n<br/>\n\n\n### getServerSnapshot (optional)\n\n- SSR ì‹œ ì‚¬ìš©ë  ì´ˆê¸° ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜\n\n- ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ì¼ê´€ëœ ìƒíƒœ ìœ ì§€ì— ì‚¬ìš©\n\n<br/>\n\n## useSynExternalStore ë¶„ì„í•´ë³´ì\n\n```typescript\nfunction useSyncExternalStore(subscribe, getSnapshot) {\n  const value = getSnapshot();\n  const [{ inst }, forceUpdate] = useState({ inst: { value, getSnapshot } });\n\n  useLayoutEffect(() => {\n    inst.value = value;\n    inst.getSnapshot = getSnapshot;\n\n    if (checkIfSnapshotChanged(inst)) {\n      forceUpdate({ inst });\n    }\n  }, [subscribe, value, getSnapshot]);\n\n  useEffect(() => {\n    if (checkIfSnapshotChanged(inst)) {\n      forceUpdate({ inst });\n    }\n\n    const handleStoreChange = () => {\n      if (checkIfSnapshotChanged(inst)) {\n        forceUpdate({ inst });\n      }\n    };\n\n    return subscribe(handleStoreChange);\n  }, [subscribe]);\n\n  return value;\n}\n```\n\nìì„¸í•˜ê²Œ ì•Œì•„ë³´ê¸° ì „ì— ê°„ë‹¨í•œ ë™ì‘ ìˆœì„œë¥¼ ì‚´í´ë³´ë©´\n\nì´ˆê¸° ë Œë”ë§ ë‹¨ê³„ì—ì„œ getSnapshotìœ¼ë¡œ ì´ˆê¸° ê°’ íšë“ â†’ inst ê°ì²´ ìƒì„± ë° ìƒíƒœ ì´ˆê¸°í™” â†’ useLayoutEffectì—ì„œ ë™ê¸°í™” í™•ì¸ â†’ useEffectì—ì„œ êµ¬ë… ì„¤ì •ì„ ì§„í–‰í•œë‹¤.\n\nì—…ë°ì´íŠ¸ê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ ì™¸ë¶€ ìŠ¤í† ì–´ ë³€ê²½ â†’ handleStoreChange í˜¸ì¶œ â†’ ìŠ¤ëƒ…ìƒ· í™•ì¸ â†’ í•„ìš”ì‹œ ë¦¬ë Œë”ë§ì„ í•˜ê²Œëœë‹¤.\n\nì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ë©´ í´ë¦°ì—…ì„ í•˜ê¸° ìœ„í•´ useEffect í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰í•˜ê³  êµ¬ë…í•´ì œë¥¼ ì§„í–‰í•œë‹¤.\n\n<br/>\n\n### ì´ˆê¸°ì— useSyncExternalStore ì„¤ì •\n\n```typescript\nfunction useSyncExternalStore(subscribe, getSnapshot) {\n  const value = getSnapshot(); // í˜„ì¬ ìŠ¤ëƒ…ìƒµì„ ê°€ì ¸ì˜´\n\n  // ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¡œ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ë¥¼ ê´€ë¦¬\n  // useStateì˜ ì´ˆê¸°ê°’ìœ¼ë¡œ inst ê°ì²´ë¥¼ ìƒì„±\n  const [{ inst }, forceUpdate] = useState({\n    inst: {\n      value, // í˜„ì¬ ìŠ¤ëƒ…ìƒ· ê°’\n      getSnapshot, // ìŠ¤ëƒ…ìƒ·ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜\n    },\n  });\n}\n```\n\në Œë”ë§ ê°„ì— ì§€ì†ì ìœ¼ë¡œ ì°¸ì¡°í•´ì•¼í•˜ëŠ” ê°’ë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ inst ê°ì²´ë¥¼ useStateë¡œ ê´€ë¦¬í•œë‹¤.\n\nforceUpdateë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë‹¤.\n\n<br/>\n\n### Layout Effectì—ì„œì˜ ë™ê¸°í™”(Tearing ë°©ì§€ë¥¼ ìœ„í•œ í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜)\n\n```typescript\nuseLayoutEffect(() => {\n  // inst ê°ì²´ ì—…ë°ì´íŠ¸\n  inst.value = value;\n  inst.getSnapshot = getSnapshot;\n\n  // ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸ ë° ë¦¬ë Œë”ë§\n  if (checkIfSnapshotChanged(inst)) {\n    forceUpdate({ inst });\n  }\n}, [subscribe, value, getSnapshot]);\n```\n\nDOM ì—…ë°ì´íŠ¸ ì „ì— ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— useLayoutEffectë¥¼ ì‚¬ìš©í•œë‹¤.\n\ncheckIfSnapshotChanged í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë Œë”ë§ ê³¼ì •ì—ì„œ ìŠ¤ëƒ…ìƒ·ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì¦‰ì‹œ í™•ì¸í•œë‹¤.\n\n<br/>\n\n### Effectì—ì„œ êµ¬ë… ì„¤ì •\n\n```typescript\nuseEffect(() => {\n  // ì´ˆê¸° ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸\n  if (checkIfSnapshotChanged(inst)) {\n    forceUpdate({ inst });\n  }\n\n  // ìŠ¤í† ì–´ ë³€ê²½ í•¸ë“¤ëŸ¬\n  const handleStoreChange = () => {\n    if (checkIfSnapshotChanged(inst)) {\n      forceUpdate({ inst });\n    }\n  };\n\n  // êµ¬ë… ì„¤ì • ë° ì •ë¦¬ í•¨ìˆ˜ ë°˜í™˜\n  return subscribe(handleStoreChange);\n}, [subscribe]);\n```\n\nìŠ¤í† ì–´ ë³€ê²½ ì‹œ ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸ í›„ í•„ìš”í•œ ê²½ìš°ë§Œ ë¦¬ë Œë”ë§í•˜ê³  ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ìœ¼ë¡œ êµ¬ë… ì •ë¦¬í•œë‹¤.\n\n<br/>\n\n### ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸ ë¡œì§\n\n```typescript\nfunction checkIfSnapshotChanged(inst) {\n  const latestGetSnapshot = inst.getSnapshot;\n  const prevValue = inst.value;\n\n  try {\n    const nextValue = latestGetSnapshot();\n    return !Object.is(prevValue, nextValue);\n  } catch (error) {\n    return true; // ì—ëŸ¬ ë°œìƒ ì‹œ ë³€ê²½ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼\n  }\n}\n```\n\nObject.isë¥¼ í™œìš©í•´ì„œ ì •í™•í•œ ê°’ ë¹„êµë¥¼ í•œë‹¤. \n\nì´ ê³¼ì •ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬ë„ í¬í•¨ë˜ì–´ìˆê³  ë¶ˆë³€ì„±ì„ ì „ì œë¡œ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ìˆë‹¤.\n\n<br/>\n\n\n## ì£¼ìš” íŠ¹ì§•\n\nì•ì„œ ì´ì•¼ê¸°í•œ ë°ë¡œ useSyncExternalStore ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¥ì ì€ ë™ê¸°ì  ì—…ë°ì´íŠ¸, ì„±ëŠ¥ ìµœì í™”, ì•ˆì •ì„±ì´ë‹¤.\n\n### ë™ê¸°ì  ì—…ë°ì´íŠ¸\n\n- ì™¸ë¶€ ìŠ¤í† ì–´ì˜ ë³€ê²½ì‚¬í•­ì€ í•­ìƒ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•´ React ìƒíƒœ ì—…ë°ì´íŠ¸ì™€ì˜ ì¼ê´€ì„± ë³´ì¥\n\n- **startTransition**(React 18ì—ì„œ ë„ì…ëœ ìƒˆë¡œìš´ APIë¡œ, UI ì—…ë°ì´íŠ¸ì˜ ìš°ì„ ìˆœìœ„ë¥¼ êµ¬ë¶„í•˜ëŠ” ê¸°ëŠ¥)ìœ¼ë¡œ ë˜í•‘ë˜ì–´ë„ ë™ê¸°ì  ì²˜ë¦¬ë¥¼ ìœ ì§€í•œë‹¤.\n  - ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, useSyncExternalStoreì—ì„œëŠ” ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ startTransition ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.\n\n<br/>\n\n### ì„±ëŠ¥ ìµœì í™”\n\n- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€\n\n  - ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì´ì „ ìŠ¤ëƒ…ìƒ·ì„ ì¬ì‚¬ìš©í•œë‹¤.\n  - ìƒˆë¡œìš´ ê°’ì¼ ë•Œë§Œ ìƒˆ ê°ì²´ê°€ ìƒì„±ëœë‹¤.\n\n- ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸ì˜ ë°°ì¹˜ ì²˜ë¦¬ ì§€ì›\n\n- ì„ íƒì ì¸ ë©”ëª¨ì´ì œì´ì…˜ ì§€ì›\n\n  ```typescript\n  function OptimizedComponent() {\n    const selectedData = useSyncExternalStoreWithSelector(\n      store.subscribe,\n      store.getSnapshot,\n      store.getServerSnapshot,\n      (state) => state.specificValue,\n      (a, b) => a === b, // ë¹„êµë¥¼ ìœ„í•œ í•¨ìˆ˜\n    );\n  \n    // ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ë§Œ ì‚¬ìš©\n    const memoizedResult = useMemo(() => expensiveComputation(selectedData), [selectedData]);\n  \n    return <div>{memoizedResult}</div>;\n  }\n  ```\n\n<br/>\n\n### ì•ˆì „ì„±\n\n- Concurrent Mode ì—ì„œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥\n\n- ì•„ë˜ì²˜ëŸ¼ cleanup() í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.\n\n  ```typescript\n  const useStore = () => {\n    // êµ¬ë… í•´ì œê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë¨\n    return useSyncExternalStore(\n      useCallback((notify) => {\n        const unsubscribe = store.subscribe(notify);\n        // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ í˜¸ì¶œ\n        return () => {\n          unsubscribe();\n          cleanup(); // ì¶”ê°€ì ì¸ ì •ë¦¬ ì‘ì—…\n        };\n      }, []),\n      store.getSnapshot,\n    );\n  };\n    ```\n\n- ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ ì •ë¦¬\n\n<br/>\n\n## React 18 ì´ì „ ë²„ì „ì„ ì‚¬ìš©í•˜ë©´?\n\n- [use-sync-external-store/shim íŒ¨í‚¤ì§€ ì œê³µ](https://www.npmjs.com/package/use-sync-external-store)\n\n- React 16.8(Hooks ë„ì…) ì´í›„ ë²„ì „ ì§€ì›\n\n- ìë™ìœ¼ë¡œ ì ì ˆí•œ êµ¬í˜„ì²´ ì„ íƒ\n\n  ```typescript\n  import { useSyncExternalStore } from 'use-sync-external-store/shim';\n  ```\n\n\n<br/>\n\n## ì¶œì²˜\n\n- [React-v18-useSyncExternalStore](https://react.dev/blog/2022/03/29/react-v18#usesyncexternalstore)\n- [useSyncExternalStore](https://ko.react.dev/reference/react/useSyncExternalStore)\n- [useMutableSource â†’ useSyncExternalStore ](https://github.com/reactwg/react-18/discussions/86)\n- [useSyncExternalStore- Github ì½”ë“œ](https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShim.js)\n- [useSyncExternalStoreShimClient.jsì˜ í•µì‹¬ ë¡œì§](https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js)\n\n```toc\n\n```\n",
    "html": "<p>useSyncExternalStoreëŠ” React 18ì—ì„œ ë„ì…ëœ Hookìœ¼ë¡œ, ì™¸ë¶€ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì™€ Reactì˜ ë™ì‹œì„± ë Œë”ë§(Concurrent Rendering)ì„ ì•ˆì „í•˜ê²Œ ì—°ë™í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤.</p>\n<p>React 18ì˜ ë™ì‹œì„± ë Œë”ë§ ëª¨ë“œì—ì„œ ì™¸ë¶€ ìŠ¤í† ì–´ì˜ ìƒíƒœ ë³€ê²½ì´ ì¼ê´€ì„±ì„ í•´ì¹˜ëŠ” ë¬¸ì œ ë°œìƒí–ˆëŠ”ë°, ì´ê²ƒì„ Tearing í˜„ìƒì´ë¼í•œë‹¤. (ê°„í˜¹ ë™ì¼í•œ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” UI ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì„œë¡œ ë‹¤ë¥¸ ê°’ì„ í‘œê¸°í•˜ëŠ” ë²„ê·¸)</p>\n<h2 id=\"tearing-í˜„ìƒ\"><a class=\"anchor\" href=\"#tearing-í˜„ìƒ\">Tearing í˜„ìƒ</a></h2>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> store</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  count: </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">0</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  listeners: </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">new</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> Set</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(),</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">listener</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">    this</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">.listeners.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">add</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(listener);</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> this</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">.listeners.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">delete</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(listener);</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  },</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  getValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">() {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> this</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">.count;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  },</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  setValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">newValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">    this</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">.count </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> newValue;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">    this</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">.listeners.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">forEach</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">((</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">listener</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> listener</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">());</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  },</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">};</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> Counter1</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">() {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> [</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">count</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">, </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">setCount</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">] </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useState</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">getValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">());</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  useEffect</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">      setCount</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">getValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">());</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }, []);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> &#x3C;</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">div</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">>Count: {count}</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">&#x3C;/</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">div</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> Counter2</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">() {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> [</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">count</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">, </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">setCount</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">] </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useState</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">getValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">());</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  useEffect</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">      setCount</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">getValue</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">());</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }, []);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> &#x3C;</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">div</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">>Count: {count}</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">&#x3C;/</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">div</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span></code></pre></figure>\n<p>Concurrent ëª¨ë“œì—ì„œ ReactëŠ” ë Œë”ë§ì„ ì—¬ëŸ¬ ì²­í¬ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•œë‹¤.</p>\n<p>ê·¸ë¦¬ê³  useEffectë¥¼ ì‚¬ìš©í•œ êµ¬ë…ì€ ë¹„ë™ê¸°ì ì´ë©°, Concurrent ëª¨ë“œì—ì„œ ë Œë”ë§ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆë‹¤.</p>\n<p>ì´ë ‡ê²Œë˜ë©´ ì„œë¡œë‹¤ë¥¸ ì‚¬ìš©ìë§ˆë‹¤ ì„œë¡œë‹¤ë¥¸ ë°ì´í„°ë¥¼ ë³´ê²Œë˜ëŠ”ë°, ë°ì´í„° ì¼ê´€ì„±ì´ ì¤‘ìš”í•œ ë„ë©”ì¸ì—ì„œëŠ” ì¹˜ëª…ì ì¸ ì˜¤ë¥˜ë¥¼ ì•¼ê¸°í•œë‹¤.</p>\n<p>ì´ëŸ° ë¬¸ì œë¥¼ useSyncExternalStoreë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> Counter1</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">() {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> count</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStore</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    store.subscribe, </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// êµ¬ë… í•¨ìˆ˜</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    store.getValue, </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// ê°’ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  );</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> &#x3C;</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">div</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">>Count: {count}</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">&#x3C;/</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">div</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> Counter2</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">() {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> count</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStore</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(store.subscribe, store.getValue);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> &#x3C;</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">div</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">>Count: {count}</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">&#x3C;/</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">div</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span></code></pre></figure>\n<p>useSyncExternalStoreì„ ì‚¬ìš©í•˜ë©´ ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.</p>\n<p>Reactê°€ ë Œë”ë§ ë„ì¤‘ ìŠ¤í† ì–´ ê°’ì´ ë³€ê²½ë˜ë©´ ì¦‰ì‹œ ê°ì§€í•˜ê³  ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ì‹œì ì˜ ë°ì´í„°ë¥¼ ë³´ì—¬ì¤€ë‹¤.</p>\n<p>ì´ë ‡ê²Œ useSyncExternalStoreì„ ì´ìš©í•´ ì™¸ë¶€ ìƒíƒœë¥¼ êµ¬ë…í•  ë•Œ useEffectë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì˜ í•œê³„ì™€ ìƒíƒœ ì—…ë°ì´íŠ¸ ë™ê¸°í™” ë¬¸ì œë¥¼ í•´ê²°í•¨.</p>\n<blockquote>\n<p>ğŸ‘‹ ì ê¹! Redux íŒ€ì—ì„œ Tearing ë¬¸ì œë¥¼ ë‹¤ë£¨ì—ˆë‹¤.</p>\n<p><a href=\"https://github.com/reduxjs/react-redux/releases/tag/v8.0.0\">React-Redux v8ì—ì„œ useSelector ë‚´ë¶€ì½”ë“œë¥¼ useSyncExternalStoreë¡œ ì—…ë°ì´íŠ¸ ì§„í–‰</a></p>\n<p>ë” ìµœì í™”ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ useSyncExternalStoreWithSelectorì„ ì‚¬ìš©</p>\n</blockquote>\n<h2 id=\"ë™ì‘ì½”ë“œ-ì‚´í´ë³´ê¸°\"><a class=\"anchor\" href=\"#ë™ì‘ì½”ë“œ-ì‚´í´ë³´ê¸°\">ë™ì‘ì½”ë“œ ì‚´í´ë³´ê¸°</a></h2>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> snapshot</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStore</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  subscribe: (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">onStoreChange</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">:</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> void</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> void</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  getSnapshot: () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> T</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  getServerSnapshot</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">?:</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> T</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">);</span></span></code></pre></figure>\n<p>ì¶œì²˜) <a href=\"https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShim.js#L17\">React-useSyncExternalStore Github</a></p>\n<h3 id=\"subscribe\"><a class=\"anchor\" href=\"#subscribe\">subscribe</a></h3>\n<ul>\n<li>\n<p>ìŠ¤í† ì–´ êµ¬ë…ì„ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ë¡œ ìŠ¤í† ì–´ ë³€ê²½ ì‹œ í˜¸ì¶œë  ì½œë°±ì„ ë°›ëŠ”ë‹¤.</p>\n</li>\n<li>\n<p>êµ¬ë… í•´ì œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤.</p>\n</li>\n<li>\n<p>ë Œë”ë§ ê°„ì— ì•ˆì •ì ì¸ ì°¸ì¡°ë¥¼ ìœ ì§€í•´ì•¼ í•œë‹¤.</p>\n</li>\n</ul>\n<h3 id=\"getsnapshot\"><a class=\"anchor\" href=\"#getsnapshot\">getSnapshot</a></h3>\n<ul>\n<li>\n<p>ìŠ¤í† ì–´ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë‹¤. ìŠ¤í† ì–´ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë™ì¼í•œ ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.</p>\n</li>\n<li>\n<p>ë°˜í™˜ê°’ì€ ë¶ˆë³€(immutable)ì´ì–´ì•¼ í•œë‹¤.</p>\n</li>\n<li>\n<p>getSnapShot í•¨ìˆ˜ì—ì„œ ë§¤ë²ˆ ë˜‘ê°™ì€ ì°¸ì¡°ë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ë©´ ReactëŠ” ë³€ê²½ì„ ê°ì§€í•  ìˆ˜ ì—†ê¸°ì— ì‹¤ì œ ê°ì²´ ë³€í™”ì—ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë ‡ê¸°ì— Immer ë¼ì´ë¸ŒëŸ¬ë¦¬, ê¹Šì€ ë³µì‚¬ ë“±ìœ¼ë¡œ ë¶ˆë³€ì„±ì„ ë³´ì¥í•˜ë©° ë‹¤ë¥¸ ì°¸ì¡°ë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤. (Redux, Mobx ì—ì„œ ì¤‘ì ìœ¼ë¡œ ë‹¤ë£¸)</p>\n</li>\n</ul>\n<h3 id=\"getserversnapshot-optional\"><a class=\"anchor\" href=\"#getserversnapshot-optional\">getServerSnapshot (optional)</a></h3>\n<ul>\n<li>\n<p>SSR ì‹œ ì‚¬ìš©ë  ì´ˆê¸° ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜</p>\n</li>\n<li>\n<p>ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ì¼ê´€ëœ ìƒíƒœ ìœ ì§€ì— ì‚¬ìš©</p>\n</li>\n</ul>\n<h2 id=\"usesynexternalstore-ë¶„ì„í•´ë³´ì\"><a class=\"anchor\" href=\"#usesynexternalstore-ë¶„ì„í•´ë³´ì\">useSynExternalStore ë¶„ì„í•´ë³´ì</a></h2>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStore</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">, </span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">getSnapshot</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> value</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> getSnapshot</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">();</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> [{ </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">inst</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> }, </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">] </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useState</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst: { value, getSnapshot } });</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  useLayoutEffect</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    inst.value </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> value;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    inst.getSnapshot </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> getSnapshot;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    if</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(inst)) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">      forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    }</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }, [subscribe, value, getSnapshot]);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">  useEffect</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    if</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(inst)) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">      forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    const</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> handleStoreChange</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">      if</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(inst)) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">        forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">      }</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    };</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(handleStoreChange);</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }, [subscribe]);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> value;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span></code></pre></figure>\n<p>ìì„¸í•˜ê²Œ ì•Œì•„ë³´ê¸° ì „ì— ê°„ë‹¨í•œ ë™ì‘ ìˆœì„œë¥¼ ì‚´í´ë³´ë©´</p>\n<p>ì´ˆê¸° ë Œë”ë§ ë‹¨ê³„ì—ì„œ getSnapshotìœ¼ë¡œ ì´ˆê¸° ê°’ íšë“ â†’ inst ê°ì²´ ìƒì„± ë° ìƒíƒœ ì´ˆê¸°í™” â†’ useLayoutEffectì—ì„œ ë™ê¸°í™” í™•ì¸ â†’ useEffectì—ì„œ êµ¬ë… ì„¤ì •ì„ ì§„í–‰í•œë‹¤.</p>\n<p>ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ ì™¸ë¶€ ìŠ¤í† ì–´ ë³€ê²½ â†’ handleStoreChange í˜¸ì¶œ â†’ ìŠ¤ëƒ…ìƒ· í™•ì¸ â†’ í•„ìš”ì‹œ ë¦¬ë Œë”ë§ì„ í•˜ê²Œëœë‹¤.</p>\n<p>ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ë©´ í´ë¦°ì—…ì„ í•˜ê¸° ìœ„í•´ useEffect í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰í•˜ê³  êµ¬ë…í•´ì œë¥¼ ì§„í–‰í•œë‹¤.</p>\n<h3 id=\"ì´ˆê¸°ì—-usesyncexternalstore-ì„¤ì •\"><a class=\"anchor\" href=\"#ì´ˆê¸°ì—-usesyncexternalstore-ì„¤ì •\">ì´ˆê¸°ì— useSyncExternalStore ì„¤ì •</a></h3>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStore</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">, </span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">getSnapshot</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> value</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> getSnapshot</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(); </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// í˜„ì¬ ìŠ¤ëƒ…ìƒµì„ ê°€ì ¸ì˜´</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¡œ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ë¥¼ ê´€ë¦¬</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // useStateì˜ ì´ˆê¸°ê°’ìœ¼ë¡œ inst ê°ì²´ë¥¼ ìƒì„±</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> [{ </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">inst</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> }, </span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\">forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">] </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useState</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    inst: {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">      value, </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// í˜„ì¬ ìŠ¤ëƒ…ìƒ· ê°’</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">      getSnapshot, </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// ìŠ¤ëƒ…ìƒ·ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    },</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span></code></pre></figure>\n<p>ë Œë”ë§ ê°„ì— ì§€ì†ì ìœ¼ë¡œ ì°¸ì¡°í•´ì•¼í•˜ëŠ” ê°’ë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ inst ê°ì²´ë¥¼ useStateë¡œ ê´€ë¦¬í•œë‹¤.</p>\n<p>forceUpdateë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë‹¤.</p>\n<h3 id=\"layout-effectì—ì„œì˜-ë™ê¸°í™”tearing-ë°©ì§€ë¥¼-ìœ„í•œ-í•µì‹¬-ë©”ì»¤ë‹ˆì¦˜\"><a class=\"anchor\" href=\"#layout-effectì—ì„œì˜-ë™ê¸°í™”tearing-ë°©ì§€ë¥¼-ìœ„í•œ-í•µì‹¬-ë©”ì»¤ë‹ˆì¦˜\">Layout Effectì—ì„œì˜ ë™ê¸°í™”(Tearing ë°©ì§€ë¥¼ ìœ„í•œ í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜)</a></h3>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">useLayoutEffect</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // inst ê°ì²´ ì—…ë°ì´íŠ¸</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  inst.value </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> value;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  inst.getSnapshot </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> getSnapshot;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸ ë° ë¦¬ë Œë”ë§</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  if</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(inst)) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">    forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}, [subscribe, value, getSnapshot]);</span></span></code></pre></figure>\n<p>DOM ì—…ë°ì´íŠ¸ ì „ì— ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— useLayoutEffectë¥¼ ì‚¬ìš©í•œë‹¤.</p>\n<p>checkIfSnapshotChanged í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë Œë”ë§ ê³¼ì •ì—ì„œ ìŠ¤ëƒ…ìƒ·ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì¦‰ì‹œ í™•ì¸í•œë‹¤.</p>\n<h3 id=\"effectì—ì„œ-êµ¬ë…-ì„¤ì •\"><a class=\"anchor\" href=\"#effectì—ì„œ-êµ¬ë…-ì„¤ì •\">Effectì—ì„œ êµ¬ë… ì„¤ì •</a></h3>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">useEffect</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // ì´ˆê¸° ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  if</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(inst)) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">    forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // ìŠ¤í† ì–´ ë³€ê²½ í•¸ë“¤ëŸ¬</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> handleStoreChange</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    if</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(inst)) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">      forceUpdate</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">({ inst });</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    }</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  };</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // êµ¬ë… ì„¤ì • ë° ì •ë¦¬ í•¨ìˆ˜ ë°˜í™˜</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(handleStoreChange);</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}, [subscribe]);</span></span></code></pre></figure>\n<p>ìŠ¤í† ì–´ ë³€ê²½ ì‹œ ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸ í›„ í•„ìš”í•œ ê²½ìš°ë§Œ ë¦¬ë Œë”ë§í•˜ê³  ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ìœ¼ë¡œ êµ¬ë… ì •ë¦¬í•œë‹¤.</p>\n<h3 id=\"ìŠ¤ëƒ…ìƒ·-ë³€ê²½-í™•ì¸-ë¡œì§\"><a class=\"anchor\" href=\"#ìŠ¤ëƒ…ìƒ·-ë³€ê²½-í™•ì¸-ë¡œì§\">ìŠ¤ëƒ…ìƒ· ë³€ê²½ í™•ì¸ ë¡œì§</a></h3>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> checkIfSnapshotChanged</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">inst</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> latestGetSnapshot</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> inst.getSnapshot;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> prevValue</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> inst.value;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  try</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> nextValue</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> latestGetSnapshot</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">();</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> !</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">Object.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">is</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(prevValue, nextValue);</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  } </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">catch</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> (error) {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">    return</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> true</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">; </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// ì—ëŸ¬ ë°œìƒ ì‹œ ë³€ê²½ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  }</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span></code></pre></figure>\n<p>Object.isë¥¼ í™œìš©í•´ì„œ ì •í™•í•œ ê°’ ë¹„êµë¥¼ í•œë‹¤.</p>\n<p>ì´ ê³¼ì •ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬ë„ í¬í•¨ë˜ì–´ìˆê³  ë¶ˆë³€ì„±ì„ ì „ì œë¡œ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ìˆë‹¤.</p>\n<h2 id=\"ì£¼ìš”-íŠ¹ì§•\"><a class=\"anchor\" href=\"#ì£¼ìš”-íŠ¹ì§•\">ì£¼ìš” íŠ¹ì§•</a></h2>\n<p>ì•ì„œ ì´ì•¼ê¸°í•œ ë°ë¡œ useSyncExternalStore ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¥ì ì€ ë™ê¸°ì  ì—…ë°ì´íŠ¸, ì„±ëŠ¥ ìµœì í™”, ì•ˆì •ì„±ì´ë‹¤.</p>\n<h3 id=\"ë™ê¸°ì -ì—…ë°ì´íŠ¸\"><a class=\"anchor\" href=\"#ë™ê¸°ì -ì—…ë°ì´íŠ¸\">ë™ê¸°ì  ì—…ë°ì´íŠ¸</a></h3>\n<ul>\n<li>\n<p>ì™¸ë¶€ ìŠ¤í† ì–´ì˜ ë³€ê²½ì‚¬í•­ì€ í•­ìƒ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•´ React ìƒíƒœ ì—…ë°ì´íŠ¸ì™€ì˜ ì¼ê´€ì„± ë³´ì¥</p>\n</li>\n<li>\n<p><strong>startTransition</strong>(React 18ì—ì„œ ë„ì…ëœ ìƒˆë¡œìš´ APIë¡œ, UI ì—…ë°ì´íŠ¸ì˜ ìš°ì„ ìˆœìœ„ë¥¼ êµ¬ë¶„í•˜ëŠ” ê¸°ëŠ¥)ìœ¼ë¡œ ë˜í•‘ë˜ì–´ë„ ë™ê¸°ì  ì²˜ë¦¬ë¥¼ ìœ ì§€í•œë‹¤.</p>\n<ul>\n<li>ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, useSyncExternalStoreì—ì„œëŠ” ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ startTransition ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ì„±ëŠ¥-ìµœì í™”\"><a class=\"anchor\" href=\"#ì„±ëŠ¥-ìµœì í™”\">ì„±ëŠ¥ ìµœì í™”</a></h3>\n<ul>\n<li>\n<p>ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€</p>\n<ul>\n<li>ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì´ì „ ìŠ¤ëƒ…ìƒ·ì„ ì¬ì‚¬ìš©í•œë‹¤.</li>\n<li>ìƒˆë¡œìš´ ê°’ì¼ ë•Œë§Œ ìƒˆ ê°ì²´ê°€ ìƒì„±ëœë‹¤.</li>\n</ul>\n</li>\n<li>\n<p>ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸ì˜ ë°°ì¹˜ ì²˜ë¦¬ ì§€ì›</p>\n</li>\n<li>\n<p>ì„ íƒì ì¸ ë©”ëª¨ì´ì œì´ì…˜ ì§€ì›</p>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">function</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> OptimizedComponent</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">() {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> selectedData</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStoreWithSelector</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    store.subscribe,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    store.getSnapshot,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    store.getServerSnapshot,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    (</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">state</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> state.specificValue,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    (</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">a</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">, </span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">b</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> a </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">===</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> b, </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// ë¹„êµë¥¼ ìœ„í•œ í•¨ìˆ˜</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  );</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // ë©”ëª¨ì´ì œì´ì…˜ëœ ê°’ë§Œ ì‚¬ìš©</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> memoizedResult</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useMemo</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(() </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> expensiveComputation</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(selectedData), [selectedData]);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> &#x3C;</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">div</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">>{memoizedResult}</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">&#x3C;/</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">div</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">;</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">}</span></span></code></pre></figure>\n</li>\n</ul>\n<h3 id=\"ì•ˆì „ì„±\"><a class=\"anchor\" href=\"#ì•ˆì „ì„±\">ì•ˆì „ì„±</a></h3>\n<ul>\n<li>\n<p>Concurrent Mode ì—ì„œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥</p>\n</li>\n<li>\n<p>ì•„ë˜ì²˜ëŸ¼ cleanup() í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì •ë¦¬ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.</p>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">const</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useStore</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">  // êµ¬ë… í•´ì œê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë¨</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">  return</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\"> useSyncExternalStore</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">    useCallback</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">((</span><span style=\"--shiki-dark:#FFAB70;--shiki-light:#E36209\">notify</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">) </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">      const</span><span style=\"--shiki-dark:#79B8FF;--shiki-light:#005CC5\"> unsubscribe</span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\"> =</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> store.</span><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">subscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(notify);</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">      // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ í˜¸ì¶œ</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">      return</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> () </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">=></span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> {</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">        unsubscribe</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">();</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#B392F0;--shiki-light:#6F42C1\">        cleanup</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">(); </span><span style=\"--shiki-dark:#6A737D;--shiki-light:#6A737D\">// ì¶”ê°€ì ì¸ ì •ë¦¬ ì‘ì—…</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">      };</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    }, []),</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">    store.getSnapshot,</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">  );</span></span>\n<span data-line=\"\"><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">};</span></span></code></pre></figure>\n</li>\n<li>\n<p>ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìë™ ì •ë¦¬</p>\n</li>\n</ul>\n<h2 id=\"react-18-ì´ì „-ë²„ì „ì„-ì‚¬ìš©í•˜ë©´\"><a class=\"anchor\" href=\"#react-18-ì´ì „-ë²„ì „ì„-ì‚¬ìš©í•˜ë©´\">React 18 ì´ì „ ë²„ì „ì„ ì‚¬ìš©í•˜ë©´?</a></h2>\n<ul>\n<li>\n<p><a href=\"https://www.npmjs.com/package/use-sync-external-store\">use-sync-external-store/shim íŒ¨í‚¤ì§€ ì œê³µ</a></p>\n</li>\n<li>\n<p>React 16.8(Hooks ë„ì…) ì´í›„ ë²„ì „ ì§€ì›</p>\n</li>\n<li>\n<p>ìë™ìœ¼ë¡œ ì ì ˆí•œ êµ¬í˜„ì²´ ì„ íƒ</p>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"typescript\" data-theme=\"github-dark github-light\"><code data-language=\"typescript\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">import</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\"> { useSyncExternalStore } </span><span style=\"--shiki-dark:#F97583;--shiki-light:#D73A49\">from</span><span style=\"--shiki-dark:#9ECBFF;--shiki-light:#032F62\"> 'use-sync-external-store/shim'</span><span style=\"--shiki-dark:#E1E4E8;--shiki-light:#24292E\">;</span></span></code></pre></figure>\n</li>\n</ul>\n<h2 id=\"ì¶œì²˜\"><a class=\"anchor\" href=\"#ì¶œì²˜\">ì¶œì²˜</a></h2>\n<ul>\n<li><a href=\"https://react.dev/blog/2022/03/29/react-v18#usesyncexternalstore\">React-v18-useSyncExternalStore</a></li>\n<li><a href=\"https://ko.react.dev/reference/react/useSyncExternalStore\">useSyncExternalStore</a></li>\n<li><a href=\"https://github.com/reactwg/react-18/discussions/86\">useMutableSource â†’ useSyncExternalStore </a></li>\n<li><a href=\"https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShim.js\">useSyncExternalStore- Github ì½”ë“œ</a></li>\n<li><a href=\"https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js\">useSyncExternalStoreShimClient.jsì˜ í•µì‹¬ ë¡œì§</a></li>\n</ul>\n<figure data-rehype-pretty-code-figure=\"\"><pre tabindex=\"0\" data-language=\"toc\" data-theme=\"github-dark github-light\"><code data-language=\"toc\" data-theme=\"github-dark github-light\" style=\"display: grid;\"><span data-line=\"\"> </span></code></pre></figure>"
  },
  "_id": "241031/index.md",
  "_raw": {
    "sourceFilePath": "241031/index.md",
    "sourceFileName": "index.md",
    "sourceFileDir": "241031",
    "contentType": "markdown",
    "flattenedPath": "241031"
  },
  "type": "Post",
  "slug": "/241031",
  "categoryArray": [
    "í”„ë¡ íŠ¸ì—”ë“œ",
    "ìë°”ìŠ¤í¬ë¦½íŠ¸"
  ],
  "readingTime": "11 min read",
  "excerpt": "useSyncExternalStoreëŠ” React 18ì—ì„œ ë„ì…ëœ Hookìœ¼ë¡œ, ì™¸ë¶€ ìƒíƒœ ê´€ë¦¬ ìŠ¤í† ì–´ì™€ Reactì˜ ë™ì‹œì„± ë Œë”ë§(Concurrent Rendering)ì„ ì•ˆì „í•˜ê²Œ ì—°ë™í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤.\n\nReact 18ì˜ ë™ì‹œì„± ë Œë”ë§ ëª¨ë“œì—ì„œ ì™¸ë¶€ ìŠ¤í† ì–´ì˜ ìƒíƒœ ë³€ê²½ì´ ì¼ê´€ì„±ì„ í•´ì¹˜ëŠ” ë¬¸ì œ ë°œìƒí–ˆëŠ”ë°, ì´ê²ƒì„ Tearing í˜„ìƒì´ë¼í•œë‹¤. (ê°„í˜¹ ë™..."
}